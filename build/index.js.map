{"version":3,"sources":["../backend/index.js"],"names":["app","PORT","process","env","mongoose","Promise","global","NODE_ENV","connect","CONFIG","connectionString","catch","error","console","use","express","urlencoded","extended","json","log","static","path","join","__dirname","routes","forEach","route","method","handler","get","req","res","sendFile","listen"],"mappings":";;AAAA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,MAAM,wBAAZ;AACA,IAAMC,OAAOC,QAAQC,GAAR,CAAYF,IAAZ,IAAoB,IAAjC;;AAEA;AACAG,mBAASC,OAAT,GAAmBC,OAAOD,OAA1B;AACAH,QAAQC,GAAR,CAAYI,QAAZ,KAAyB,YAAzB,GACMH,mBACKI,OADL,CACaC,iBAAOC,gBADpB,EAEKC,KAFL,CAEW,UAACC,KAAD;AAAA,WAAWC,QAAQD,KAAR,CAAcA,KAAd,CAAX;AAAA,CAFX,CADN,GAIMR,mBACKI,OADL,CACa,mCADb,EAEKG,KAFL,CAEW,UAACC,KAAD;AAAA,WAAWC,QAAQD,KAAR,CAAcA,KAAd,CAAX;AAAA,CAFX,CAJN;;AAQAZ,IAAIc,GAAJ,CAAQC,kBAAQC,UAAR,CAAmB,EAAEC,UAAU,IAAZ,EAAnB,CAAR;AACAjB,IAAIc,GAAJ,CAAQC,kBAAQG,IAAR,EAAR;AACAL,QAAQM,GAAR,CAAY,sBAAZ,EAAoCjB,QAAQC,GAAR,CAAYI,QAAhD;;AAEAL,QAAQC,GAAR,CAAYI,QAAZ,KAAyB,YAAzB,GACMP,IAAIc,GAAJ,CAAQC,kBAAQK,MAAR,CAAeC,eAAKC,IAAL,CAAUC,SAAV,EAAqB,mBAArB,CAAf,CAAR,CADN,GAEMvB,IAAIc,GAAJ,CAAQC,kBAAQK,MAAR,CAAeC,eAAKC,IAAL,CAAUC,SAAV,EAAqB,cAArB,CAAf,CAAR,CAFN;;AAIAC,eAAOC,OAAP,CAAe,UAACC,KAAD,EAAW;AACtB1B,QAAI0B,MAAMC,MAAV,EAAkBD,MAAML,IAAxB,EAA8BK,MAAME,OAApC;AACH,CAFD;;AAIA5B,IAAI6B,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AACvBA,QAAIC,QAAJ,CAAaX,eAAKC,IAAL,CAAUC,YAAY,4BAAtB,CAAb;AACH,CAFD;;AAIAvB,IAAIiC,MAAJ,CAAWhC,IAAX,EAAiB;AAAA,WAAMY,QAAQM,GAAR,qCAA8ClB,IAA9C,CAAN;AAAA,CAAjB","file":"index.js","sourcesContent":["import express from \"express\";\r\nimport { routes } from \"./routes\";\r\nimport mongoose from \"mongoose\";\r\nimport path from \"path\";\r\nimport CONFIG from \"./config\";\r\n\r\nconst app = express();\r\nconst PORT = process.env.PORT || 8000;\r\n\r\n//mongoose connection\r\nmongoose.Promise = global.Promise;\r\nprocess.env.NODE_ENV === \"production\"\r\n    ? mongoose\r\n          .connect(CONFIG.connectionString)\r\n          .catch((error) => console.error(error))\r\n    : mongoose\r\n          .connect(\"mongodb://127.0.0.1:27017/jasondb\")\r\n          .catch((error) => console.error(error));\r\n\r\napp.use(express.urlencoded({ extended: true }));\r\napp.use(express.json());\r\nconsole.log(\"process.env.NODE_ENV\", process.env.NODE_ENV);\r\n\r\nprocess.env.NODE_ENV === \"production\"\r\n    ? app.use(express.static(path.join(__dirname, \"../frontend/build\")))\r\n    : app.use(express.static(path.join(__dirname, \"../frontend/\")));\r\n\r\nroutes.forEach((route) => {\r\n    app[route.method](route.path, route.handler);\r\n});\r\n\r\napp.get(\"*\", (req, res) => {\r\n    res.sendFile(path.join(__dirname + \"/frontend/build/index.html\"));\r\n});\r\n\r\napp.listen(PORT, () => console.log(`Your server is running on port ${PORT}`));\r\n"]}